<!--
 * @Author: diaochan
 * @Date: 2025-03-25 20:44:41
 * @LastEditors: diaochan
 * @LastEditTime: 2025-03-25 20:46:15
 * @Description: 
-->
# 任务与群组关联需求说明

## 需求概述

为了便于数据统计和分析，系统需要在会员报名任务和提交任务时，记录该会员所属的群组ID。这样可以通过群组维度来分析任务的参与率和完成情况，为运营决策提供数据支持。

## 具体实现要点

1. **数据表结构**
   - `enrolled_tasks` 表中已有 `related_group_id` 字段，用于存储会员报名任务时所属的群组ID
   - `submitted_tasks` 表中已有 `related_group_id` 字段，用于存储会员提交任务时所属的群组ID

2. **业务逻辑**
   - 当会员报名任务时，系统需要查询该会员所属的群组信息
   - 当会员提交任务时，系统需要查询该会员所属的群组信息
   - 如果会员同时属于多个群组，仅记录第一个群组ID（按照查询结果的第一条记录）
   - 如果会员不属于任何群组，则不记录群组ID（`related_group_id` 保持为 NULL）

3. **查询会员群组信息**
   - 通过 `member_groups` 表查询会员所属的群组
   - 查询语句需按某种顺序（如创建时间、加入时间等）排序，以确保多群组情况下始终选择第一个群组

4. **数据统计使用场景**
   - 基于群组统计任务参与情况
   - 计算各群组的任务完成率
   - 分析群组活跃度与任务类型的关系
   - 为群组运营提供数据支持

## 技术实现

需要在以下位置修改代码：

1. 会员报名任务的接口处理逻辑
2. 会员提交任务的接口处理逻辑

两处都需要增加查询会员群组并记录第一个群组ID的功能。 